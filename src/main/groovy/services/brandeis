import src.main._private.ServiceHandler

String method = request.method

String username = System.getenv('BRANDEIS_USERNAME')
String password = System.getenv('BRANDEIS_PASSWORD')

if (!username || !password) {
    response.status = HttpServletResponse.SC_INTERNAL_SERVER_ERROR
    out.println "This service has not been properly configured."
    return
}

if (method != 'GET') {
    response.status = HttpServletResponse.SC_METHOD_NOT_ALLOWED
    response.addHeader('Allow', 'GET')
    return
}

ServiceHandler handler = new ServiceHandler(this)
handler.url = 'http://eldrad.cs-i.brandeis.edu:8080/service_manager'
handler.username = username
handler.password = password
handler.node = 'Brandeis'
handler.handle()

