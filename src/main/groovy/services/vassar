import src.main._private.ServiceHandler

import javax.servlet.http.HttpServletResponse

String method = request.method
String url = 'http://vassar.lappsgrid.org'
String username = System.getenv('SERVICE_MANAGER_USERNAME')
String password = System.getenv('SERVICE_MANAGER_PASSWORD')

if (!username || !password) {
    response.status = HttpServletResponse.SC_INTERNAL_SERVER_ERROR
    out.println "This service has not been properly configured."
    return
}

if (method != 'GET') {
    response.status = HttpServletResponse.SC_METHOD_NOT_ALLOWED
    response.addHeader('Allow', 'GET')
    return
}

ServiceHandler handler = new ServiceHandler(this)
handler.url = 'http://vassar.lappsgrid.org'
handler.username = username
handler.password = password
handler.node = 'Vassar'
handler.handle() //params, headers, out, response, html)

